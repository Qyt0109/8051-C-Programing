C51 COMPILER V9.60.0.0   MAIN                                                              11/02/2023 21:01:40 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "main.h"
   2          
   3          unsigned char MATRIX_LED_5X7_CODES[16][5]  = {{0xC1, 0xAE, 0xB6, 0xBA, 0xC1},   // 0
   4                                                        {0x7F, 0xBD, 0x00, 0xBF, 0x7F},   // 1
   5                                                        {0x1D, 0x2E, 0x36, 0x36, 0x39},   // 2
   6                                                        {0x5D, 0x3E, 0x36, 0x36, 0x49},   // 3
   7                                                        {0x67, 0x6B, 0x6D, 0x00, 0x6F},   // 4
   8                                                        {0x50, 0x36, 0x36, 0x36, 0x4E},   // 5
   9                                                        {0x41, 0x36, 0x36, 0x36, 0x4D},   // 6
  10                                                        {0x7E, 0x7E, 0x0E, 0x76, 0x78},   // 7
  11                                                        {0x49, 0x36, 0x36, 0x36, 0x49},   // 8
  12                                                        {0x59, 0x36, 0x36, 0x36, 0x41},   // 9
  13                                                        {0x01, 0x76, 0x76, 0x76, 0x01},   // A
  14                                                        {0x00, 0x36, 0x36, 0x36, 0x49},   // B
  15                                                        {0x41, 0x3E, 0x3E, 0x3E, 0x5D},   // C
  16                                                        {0x00, 0xBE, 0xBE, 0xBE, 0x41},   // D
  17                                                        {0x00, 0x36, 0x36, 0x36, 0x3E},   // E
  18                                                        {0x00, 0x76, 0x76, 0x76, 0x7E}};  // F
  19          
  20          #define NUMBER_OF_MATRIX_LEDS 4
  21          #define OFFSET 0
  22          #define SPACING 5
  23                                                        
  24          void printMatrixLed5x7_ColData(unsigned char col_data)
  25          {
  26   1        unsigned char bit_index;
  27   1        for(bit_index = 0; bit_index < 7; bit_index++)
  28   1        {
  29   2          IC74595_DS_ROW_PIN = col_data & (0x40 >> bit_index);  // Push bit 0 1 2 3 4 5 6 7 in queue order
  30   2          IC74595_SH_CP_ROW_PIN = LOW;    // Shift latch pulse
  31   2          IC74595_SH_CP_ROW_PIN = HIGH;
  32   2        }
  33   1      }
  34          
  35          void printMatrixLed5x7_ColDataAtColIndex(unsigned char col_index, unsigned char *p_col_data_codes)
  36          {
  37   1        unsigned char col_data = *(p_col_data_codes + (col_index % 5));
  38   1        printMatrixLed5x7_ColData(col_data);
  39   1      }
  40          
  41          void printMatrixLed5x7_ColAtColIndex(unsigned char col_index, unsigned char number_of_matrix_leds)
  42          {
  43   1        unsigned int index;
  44   1        for(index = 0; index < 5 * number_of_matrix_leds; index++)
  45   1        {
  46   2          IC74595_DS_COL_PIN = !((index + col_index + 1) % 5);  // Push bit 0 1 2 3 4 5 6 7 in queue order
  47   2          IC74595_SH_CP_COL_PIN = LOW;    // Shift latch pulse
  48   2          IC74595_SH_CP_COL_PIN = HIGH;
  49   2        }
  50   1      }
  51          
  52          void printMatrixLed5x7_OutputAll()
  53          {
  54   1        IC74595_ST_CP_PIN = LOW;    // Output all
C51 COMPILER V9.60.0.0   MAIN                                                              11/02/2023 21:01:40 PAGE 2   

  55   1        IC74595_ST_CP_PIN = HIGH;
  56   1      }
  57          
  58          void printMatrixLed5x7(unsigned char *p_codes, unsigned char number_of_matrix_leds, unsigned char offset, 
             -unsigned char spacing)
  59          {
  60   1        // col_data = arr[code_index][col_index];
  61   1        // col_data = *(arr + code_index * 5 + col_index);
  62   1        unsigned char col_data, code_index, col_index;
  63   1        for(col_index = 0; col_index < 5; col_index++)
  64   1        {
  65   2          for(code_index = 0; code_index < number_of_matrix_leds; code_index++)
  66   2          {
  67   3            printMatrixLed5x7_ColDataAtColIndex(col_index, p_codes + code_index * 5);
  68   3          }
  69   2          printMatrixLed5x7_ColAtColIndex(col_index, number_of_matrix_leds);
  70   2          printMatrixLed5x7_OutputAll();
  71   2          //delay_ms(1000);
  72   2        }
  73   1      }
*** WARNING C280 IN LINE 58 OF main.c: 'offset': unreferenced local variable
*** WARNING C280 IN LINE 58 OF main.c: 'spacing': unreferenced local variable
*** WARNING C280 IN LINE 62 OF main.c: 'col_data': unreferenced local variable
  74          
  75          void printMatrixLed5x7_col_index(unsigned char *p_codes_arr, unsigned char col_index, unsigned char number
             -_of_matrix_leds, unsigned char offset, unsigned char spacing)
  76          {
  77   1        unsigned char code_data, bit_index, space;
  78   1        code_data = *(p_codes_arr + col_index);
  79   1        printMatrixLed5x7_ColData(code_data);
  80   1        printMatrixLed5x7_OutputAll();
  81   1      }
*** WARNING C280 IN LINE 75 OF main.c: 'number_of_matrix_leds': unreferenced local variable
*** WARNING C280 IN LINE 75 OF main.c: 'offset': unreferenced local variable
*** WARNING C280 IN LINE 75 OF main.c: 'spacing': unreferenced local variable
*** WARNING C280 IN LINE 77 OF main.c: 'bit_index': unreferenced local variable
*** WARNING C280 IN LINE 77 OF main.c: 'space': unreferenced local variable
  82          
  83          
  84          void setup()
  85          {
  86   1        // setup code here, to run once:
  87   1      }
  88          
  89          void loop()
  90          {
  91   1        // code section to run repeatedly:
  92   1        /*
  93   1        unsigned char col_index;
  94   1        for(col_index = 0; col_index < 5; col_index++)
  95   1        {
  96   1          printMatrixLed5x7_col_index(MATRIX_LED_5X7_CODES[0x05], col_index, NUMBER_OF_MATRIX_LEDS, OFFSET, SPACIN
             -G);
  97   1          delay_ms(2000);
  98   1        }
  99   1        //*/
 100   1        unsigned char codes[4][5] =  {MATRIX_LED_5X7_CODES[0x04],
 101   1                                      MATRIX_LED_5X7_CODES[0x03],
 102   1                                      MATRIX_LED_5X7_CODES[0x0A],
 103   1                                      MATRIX_LED_5X7_CODES[0x0F]};
 104   1        printMatrixLed5x7(codes, NUMBER_OF_MATRIX_LEDS, OFFSET, SPACING);
*** WARNING C182 IN LINE 104 OF main.c: pointer to different objects
C51 COMPILER V9.60.0.0   MAIN                                                              11/02/2023 21:01:40 PAGE 3   

 105   1      }
 106          
 107          void main()
 108          {
 109   1        setup();
 110   1        while(1)
 111   1        {
 112   2          loop();
 113   2        }
 114   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    268    ----
   CONSTANT SIZE    =     20    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     80      40
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  9 WARNING(S),  0 ERROR(S)
